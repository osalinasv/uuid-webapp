---
import { sanitize, formatTitle } from '@/lib/global'

import Layout from '@/layouts/Layout.astro'

import About from '@/components/page/About.astro'
import Header from '@/components/page/Header.astro'
import ConvertForm from '@/components/converter/ConvertForm.astro'

let { id } = Astro.params
const rawValue = sanitize(id)
---

<Layout title={formatTitle(rawValue)}>
  <Header />
  <ConvertForm rawValue={rawValue} />

  <About />
  <footer class='container px-4'></footer>
</Layout>

<script>
  const colorSchemeMedia = window.matchMedia('(prefers-color-scheme: dark)')
  setDarkTheme(colorSchemeMedia.matches)

  colorSchemeMedia.addEventListener('change', (event) => setDarkTheme(event.matches))

  function setDarkTheme(useDarkTheme: boolean) {
    if (useDarkTheme) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }
  }
</script>
