---
import { v4 as uuidv4 } from 'uuid'
import Convert from '@/components/Convert.astro'

const request = await Astro.request.formData()
const rawValue = (request.get('rawValue') as string) || uuidv4()

const sanitizedValue = rawValue.replace(/\s/g, '')
Astro.response.headers.append('HX-Push-Url', `/${encodeURIComponent(sanitizedValue)}`)
---

<Convert rawValue={sanitizedValue} />
